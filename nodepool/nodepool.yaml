script-dir: /etc/nodepool/scripts
elements-dir: /etc/nodepool/elements
images-dir: /opt/nodepool_dib

cron:
  cleanup: '*/1 * * * *'
  check: '*/15 * * * *'
  image-update: '14 14 * * *'

zmq-publishers:
  - tcp://jenkins01.openstack.org:8888
  - tcp://jenkins02.openstack.org:8888
  - tcp://jenkins03.openstack.org:8888

gearman-servers:
  - host: zuul.openstack.org

labels:
  - name: ubuntu-trusty
    image: ubuntu-trusty
    ready-script: configure_mirror.sh
    min-ready: 20
    providers:
      - name: zte-RegionOne
  - name: ubuntu-trusty-2-node
    image: ubuntu-trusty
    ready-script: multinode_setup.sh
    subnodes: 1
    min-ready: 1
    providers:
      - name: zte-RegionOne

providers:
  - name: zte-RegionOne
    region-name: 'RegionOne'
    cloud: zte
    api-timeout: 60
    boot-timeout: 120
    max-servers: 40
    rate: 0.001
    image-type: vhd
    images:
      - name: ubuntu-trusty
        min-ram: 8192
        diskimage: ubuntu-trusty
        username: jenkins
        private-key: /home/nodepool/.ssh/id_rsa
        name-filter: 'Performance'
        config-drive: true
        meta:
          vm_mode: hvm
          xenapi_use_agent: 'false'

targets:
  - name: jenkins01
  - name: jenkins02
  - name: jenkins03

diskimages:
  - name: ubuntu-trusty
    elements:
      - ubuntu-minimal
      - vm
      - simple-init
      - openstack-repos
      - nodepool-base
      - node-devstack
      - cache-bindep
      - growroot
      - infra-package-needs
    release: trusty
    env-vars:
      TMPDIR: /opt/dib_tmp
      DIB_IMAGE_CACHE: /opt/dib_cache
      DIB_APT_LOCAL_CACHE: '0'
      DIB_DISABLE_APT_CLEANUP: '1'
      http_proxy: http://127.0.0.1:8081
      https_proxy: http://127.0.0.1:8081
      no_proxy: localhost, 127.0.0.1, 10.0.0.0/8
